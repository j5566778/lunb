<!DOCTYPE html>
<html lang="en">
<head>
<meta name="viewport" content="width = device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0"/>
<meta name="renderer" content="webkit"/>
<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
	<meta charset="UTF-8">
	<title>轮播图</title>
	<style>
		body{
			margin: 0;
		}
		.box{
			/*width: 100%;*/
			margin: 0 auto;
			overflow: hidden;
		}
		.navs{
			width: 400%;
			height:auto;
		}
		.navs:after{
			content: '';
			display: block;
			clear: both;
		}
		.ims{
			/*width: 25%;*/
			float: left;
			font-size: 0;
		}
		.ims img{
			width: 100%;
		}
	</style>
</head>
<body>
	
	<div class="box">
		<div class="navs">
			<div class="ims">
				<img src="1.jpg" alt="">
			</div>
			<div class="ims">
				<img src="2.jpg" alt="">
			</div>
			<div class="ims">
				<img src="3.jpg" alt="">
			</div>
			<div class="ims">
				<img src="4.jpg" alt="">
			</div>
		</div>
	</div>

	<script>
		var cw=document.documentElement.clientWidth;
		var navs=document.querySelector('.navs');
		var ims=document.querySelectorAll('.navs div');
		for(var i=0;i<ims.length;i++){
			navs.style.width=cw*ims.length+'px';
			ims[i].style.width=cw+'px';
		}
		var index=0;
		var t=setInterval(times,1500)
		function times(){
			index++;
			if(index==ims.length){
				index=0;
			}
			navs.style.transition='transform 1s';
			navs.style.transform='translate3d('+(-index*cw)+'px,0,0)';
		}
		
		navs.addEventListener('touchstart',function(e){
			clearInterval(t);
		var of=e.targetTouches[0].clientX;
		var mf=0;
		this.style.transition='';
		var dt=e.timeStamp;
		var ms=0;
		// console.log(e)
		function Move(e){
					
			mf=e.targetTouches[0].clientX;
			navs.style.transform='translate3d('+(mf-of-index*cw)+'px,0,0)';
		}
		window.addEventListener('touchmove',Move);
		function end(e){
			// var k=Math.abs(e.changeTouches[0].clientX-dt);
			ms=e.timeStamp;
			window.removeEventListener('touchmove',Move);
			if(mf==0){
				return;
			}
			if(Math.abs(mf-of)>cw/2||(ms-dt<100)){
				if(mf-of>0){
					index--;
				}
				else if(mf-of<0){
					index++;
				}

				if(index==ims.length){
					index=ims.length-1;
				}
				else if(index==-1){
					index=0;
				}
				this.style.transition='transform 1s';
				this.style.transform='translate3d('+-(index*cw)+'px,0,0)';
			}else{
				this.style.transition='transform 1s';
				this.style.transform='translate3d('+-(index*cw)+'px,0,0)';
			}
			t=setInterval(times,1500)
			navs.removeEventListener('touchend',end);	
		}

		navs.addEventListener('touchend',end);
	})
</script>
</body>
</html>